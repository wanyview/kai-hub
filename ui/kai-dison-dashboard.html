<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KaiDison BCI çŸ¥è¯†æ¢çº½</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: linear-gradient(135deg, #0a0a1a 0%, #1a1a3e 50%, #0d0d2b 100%);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }
        .container { max-width: 1400px; margin: 0 auto; }
        
        /* Header */
        header {
            text-align: center;
            padding: 30px 0;
            border-bottom: 1px solid rgba(100,255,218,0.2);
            margin-bottom: 30px;
        }
        h1 { font-size: 2.2em; margin-bottom: 10px; background: linear-gradient(90deg, #64ffda, #667eea); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .subtitle { color: #8892b0; font-size: 1em; }
        
        /* Badge */
        .badge-row { display: flex; justify-content: center; gap: 15px; margin: 20px 0; }
        .badge {
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
        }
        .badge-kai { background: linear-gradient(135deg, #64ffda, #00bfa5); color: #000; }
        .badge-bci { background: linear-gradient(135deg, #667eea, #764ba2); }
        .badge-pro { background: linear-gradient(135deg, #f093fb, #f5576c); }
        
        /* Status Grid */
        .status-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin: 30px 0;
        }
        .status-card {
            background: rgba(100,255,218,0.05);
            border: 1px solid rgba(100,255,218,0.2);
            border-radius: 16px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s;
        }
        .status-card:hover { transform: translateY(-5px); box-shadow: 0 10px 40px rgba(100,255,218,0.2); }
        .status-icon { font-size: 2.5em; margin-bottom: 15px; }
        .status-num { font-size: 2.5em; font-weight: bold; color: #64ffda; }
        .status-label { color: #8892b0; font-size: 0.9em; margin-top: 5px; }
        .status-progress {
            height: 6px;
            background: rgba(255,255,255,0.1);
            border-radius: 3px;
            margin-top: 15px;
            overflow: hidden;
        }
        .status-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #64ffda, #667eea);
            border-radius: 3px;
            transition: width 0.5s;
        }
        
        /* Main Grid */
        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin: 30px 0;
        }
        
        /* Panel */
        .panel {
            background: rgba(255,255,255,0.02);
            border: 1px solid rgba(255,255,255,0.08);
            border-radius: 20px;
            padding: 25px;
        }
        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .panel-title { font-size: 1.2em; font-weight: 600; display: flex; align-items: center; gap: 10px; }
        .panel-subtitle { color: #8892b0; font-size: 0.85em; margin-left: 10px; }
        
        /* KaiDison Card */
        .kai-card {
            padding: 20px;
            margin: 15px 0;
            background: linear-gradient(135deg, rgba(102,126,234,0.1) 0%, rgba(118,75,162,0.1) 100%);
            border: 1px solid rgba(102,126,234,0.3);
            border-radius: 15px;
            transition: all 0.3s;
        }
        .kai-card:hover { border-color: rgba(102,126,234,0.6); }
        .kai-icon { font-size: 1.5em; margin-bottom: 10px; }
        .kai-title { font-weight: 600; margin-bottom: 8px; }
        .kai-desc { color: #8892b0; font-size: 0.85em; line-height: 1.6; }
        .kai-stats { display: flex; gap: 20px; margin-top: 15px; }
        .kai-stat { text-align: center; }
        .kai-stat-num { font-size: 1.3em; font-weight: bold; color: #64ffda; }
        .kai-stat-label { font-size: 0.75em; color: #8892b0; }
        
 Items */
        .item-list {        /* List list-style: none; }
        .item-list li {
            padding: 15px;
            margin: 10px 0;
            background: rgba(255,255,255,0.02);
            border-radius: 10px;
            border-left: 3px solid #667eea;
            transition: all 0.2s;
        }
        .item-list li:hover { background: rgba(255,255,255,0.05); }
        .item-title { font-weight: 600; margin-bottom: 5px; }
        .item-meta { font-size: 0.8em; color: #8892b0; display: flex; gap: 15px; }
        
        /* Buttons */
        .btn {
            padding: 12px 25px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: 600;
            transition: all 0.2s;
        }
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
        }
        .btn-secondary {
            background: rgba(255,255,255,0.1);
            color: #fff;
        }
        .btn:hover { opacity: 0.8; transform: translateY(-2px); }
        
        /* Agent Levels */
        .agent-pyramid {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            padding: 30px;
            margin: 20px 0;
        }
        .agent-level {
            text-align: center;
            padding: 20px;
            border-radius: 15px;
        }
        .level-kai { background: linear-gradient(135deg, rgba(100,255,218,0.2), rgba(0,191,165,0.2)); border: 2px solid #64ffda; }
        .level-kai-dison { background: linear-gradient(135deg, rgba(102,126,234,0.3), rgba(118,75,162,0.3)); border: 2px solid #f093fb; transform: scale(1.1); }
        .agent-name { font-weight: 600; font-size: 1.1em; }
        .agent-role { font-size: 0.8em; color: #8892b0; margin-top: 5px; }
        .agent-level-badge { font-size: 0.7em; padding: 3px 10px; border-radius: 10px; margin-top: 8px; display: inline-block; }
        
        /* Timeline */
        .timeline { position: relative; padding-left: 25px; }
        .timeline::before {
            content: ''; position: absolute; left: 8px; top: 0; bottom: 0;
            width: 2px; background: linear-gradient(180deg, #64ffda, #667eea);
        }
        .timeline-item { position: relative; padding: 15px 0; }
        .timeline-item::before {
            content: ''; position: absolute; left: -21px; top: 22px;
            width: 12px; height: 12px; background: #64ffda; border-radius: 50%;
        }
        .timeline-date { font-size: 0.75em; color: #8892b0; }
        .timeline-title { font-weight: 600; margin: 5px 0; }
        .timeline-desc { font-size: 0.85em; color: #8892b0; }
        
        /* Loading */
        .loading { text-align: center; padding: 40px; color: #8892b0; }
        .spinner { width: 40px; height: 40px; border: 3px solid rgba(100,255,218,0.2); border-top-color: #64ffda; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 20px; }
        @keyframes spin { to { transform: rotate(360deg); } }
        
        /* Footer */
        .footer { text-align: center; padding: 40px; margin-top: 40px; border-top: 1px solid rgba(255,255,255,0.1); color: #8892b0; }
        
        /* Responsive */
        @media (max-width: 768px) {
            .status-grid { grid-template-columns: repeat(2, 1fr); }
            .main-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ§¬ KaiDison çŸ¥è¯†æ¢çº½</h1>
            <p class="subtitle">ä¸“ä¸šçº§æ•°å­—ç§‘å­¦å®¶ | è·¨åŸŸçŸ¥è¯†èåˆå¼•æ“</p>
            
            <div class="badge-row">
                <span class="badge badge-kai">Kai åŠ©æ‰‹</span>
                <span class="badge badge-pro">KaiDison ä¸“å®¶</span>
                <span class="badge badge-bci">BCI åœºæ™¯</span>
            </div>
        </header>
        
        <!-- Agent Pyramid -->
        <div class="agent-pyramid">
            <div class="agent-level level-kai">
                <div style="font-size: 2em;">ğŸ¤–</div>
                <div class="agent-name">Kai</div>
                <div class="agent-role">æ•°å­—ä¸»ç†äºº</div>
                <div class="agent-level-badge" style="background: rgba(100,255,218,0.2);">L3 åŠ©æ‰‹çº§</div>
            </div>
            <div class="agent-level level-kai-dison">
                <div style="font-size: 2.5em;">ğŸ”¬</div>
                <div class="agent-name">KaiDison</div>
                <div class="agent-role">æ•°å­—ç§‘å­¦å®¶</div>
                <div class="agent-level-badge" style="background: rgba(240,147,251,0.2); color: #f093fb;">L5 ä¸“å®¶çº§</div>
            </div>
            <div class="agent-level level-kai">
                <div style="font-size: 2em;">ğŸ’</div>
                <div class="agent-name">CapsuleHub</div>
                <div class="agent-role">çŸ¥è¯†èƒ¶å›Š</div>
                <div class="agent-level-badge" style="background: rgba(255,255,255,0.1);">å­˜å‚¨</div>
            </div>
        </div>
        
        <!-- Status Cards -->
        <div class="status-grid" id="statusGrid">
            <div class="status-card">
                <div class="status-icon">ğŸ”—</div>
                <div class="status-num" id="crossLinks">-</div>
                <div class="status-label">è·¨åŸŸå…³è”</div>
                <div class="status-progress"><div class="status-progress-bar" id="crossLinksBar" style="width: 0%"></div></div>
            </div>
            <div class="status-card">
                <div class="status-icon">ğŸ’¥</div>
                <div class="status-num" id="breakthroughs">-</div>
                <div class="status-label">æŠ€æœ¯çªç ´</div>
                <div class="status-progress"><div class="status-progress-bar" id="breakthroughsBar" style="width: 0%"></div></div>
            </div>
            <div class="status-card">
                <div class="status-icon">ğŸ¤</div>
                <div class="status-num" id="consensus">-</div>
                <div class="status-label">å…±è¯†è¾¾æˆ</div>
                <div class="status-progress"><div class="status-progress-bar" id="consensusBar" style="width: 0%"></div></div>
            </div>
            <div class="status-card">
                <div class="status-icon">ğŸ§¬</div>
                <div class="status-num" id="fusionCapsules">-</div>
                <div class="status-label">èåˆèƒ¶å›Š</div>
                <div class="status-progress"><div class="status-progress-bar" id="fusionCapsulesBar" style="width: 0%"></div></div>
            </div>
        </div>
        
        <!-- KaiDison Core Functions -->
        <div class="panel" style="margin: 30px 0;">
            <div class="panel-header">
                <div class="panel-title">
                    ğŸ”¬ KaiDison æ ¸å¿ƒåŠŸèƒ½
                    <span class="panel-subtitle">ä¸“ä¸šçº§æ™ºèƒ½ä½“å››å¤§å¼•æ“</span>
                </div>
                <button class="btn btn-primary" onclick="runAnalysis()">ğŸ”„ è¿è¡Œåˆ†æ</button>
            </div>
            
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px;">
                <div class="kai-card">
                    <div class="kai-icon">ğŸ”—</div>
                    <div class="kai-title">è·¨åŸŸå…³è”å¼•æ“</div>
                    <div class="kai-desc">è¯†åˆ«è·¨å­¦ç§‘å…³è”ï¼Œå‘ç°ä¸åŒé¢†åŸŸä¹‹é—´çš„çŸ¥è¯†è¿æ¥ç‚¹ï¼Œç”Ÿæˆèåˆå»ºè®®ã€‚</div>
                    <div class="kai-stats">
                        <div class="kai-stat"><div class="kai-stat-num">20+</div><div class="kai-stat-label">ç›®æ ‡å…³è”æ•°</div></div>
                        <div class="kai-stat"><div class="kai-stat-num">5</div><div class="kai-stat-label">é¢†åŸŸè¦†ç›–</div></div>
                    </div>
                </div>
                
                <div class="kai-card">
                    <div class="kai-icon">ğŸ’¥</div>
                    <div class="kai-title">çªç ´æ£€æµ‹ç®—æ³•</div>
                    <div class="kai-desc">å®æ—¶ç›‘æµ‹æ–°æŠ€æœ¯ã€æ–°æ–¹æ³•ã€æ–°æ¦‚å¿µï¼Œè¯„ä¼°çªç ´å¯èƒ½æ€§å’Œå½±å“èŒƒå›´ã€‚</div>
                    <div class="kai-stats">
                        <div class="kai-stat"><div class="kai-stat-num">80%</div><div class="kai-stat-label">æ£€æµ‹å‡†ç¡®ç‡</div></div>
                        <div class="kai-stat"><div class="kai-stat-num">5+</div><div class="kai-stat-label">ç›®æ ‡çªç ´</div></div>
                    </div>
                </div>
                
                <div class="kai-card">
                    <div class="kai-icon">ğŸ¤</div>
                    <div class="kai-title">å…±è¯†è¾¾æˆè¿½è¸ª</div>
                    <div class="kai-desc">åˆ†æå¤šæ–¹è§‚ç‚¹æ¼”åŒ–ï¼Œè¿½è¸ªå…±è¯†å½¢æˆè¿‡ç¨‹ï¼Œè¯†åˆ«äº‰è®®ç‚¹å’Œèåˆè·¯å¾„ã€‚</div>
                    <div class="kai-stats">
                        <div class="kai-stat"><div class="kai-stat-num">5+</div><div class="kai-stat-label">ç›®æ ‡å…±è¯†</div></div>
                        <div class="kai-stat"><div class="kai-stat-num">3</div><div class="kai-stat-label">æ²™é¾™è¦†ç›–</div></div>
                    </div>
                </div>
                
                <div class="kai-card">
                    <div class="kai-icon">ğŸ”®</div>
                    <div class="kai-title">è¶‹åŠ¿é¢„æµ‹</div>
                    <div class="kai-desc">åŸºäºçŸ¥è¯†èƒ¶å›Šå’Œè®¨è®ºæ–¹å‘ï¼Œé¢„æµ‹æŠ€æœ¯è¶‹åŠ¿å’Œæœªæ¥å‘å±•æ–¹å‘ã€‚</div>
                    <div class="kai-stats">
                        <div class="kai-stat"><div class="kai-stat-num">3æœˆ</div><div class="kai-stat-label">é¢„æµ‹å‘¨æœŸ</div></div>
                        <div class="kai-stat"><div class="kai-stat-num">5</div><div class="kai-stat-label">ä¸Šå‡è¯é¢˜</div></div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Results Panel -->
        <div class="main-grid">
            <div class="panel">
                <div class="panel-header">
                    <div class="panel-title">ğŸ’¥ æŠ€æœ¯çªç ´æ£€æµ‹</div>
                </div>
                <div id="breakthroughsList">
                    <div class="loading"><div class="spinner"></div>ç­‰å¾…åˆ†æ...</div>
                </div>
            </div>
            
            <div class="panel">
                <div class="panel-header">
                    <div class="panel-title">ğŸ”— è·¨åŸŸå…³è”</div>
                </div>
                <div id="associationsList">
                    <div class="loading"><div class="spinner"></div>ç­‰å¾…åˆ†æ...</div>
                </div>
            </div>
            
            <div class="panel">
                <div class="panel-header">
                    <div class="panel-title">ğŸ¤ å…±è¯†è¾¾æˆ</div>
                </div>
                <div id="consensusList">
                    <div class="loading"><div class="spinner"></div>ç­‰å¾…åˆ†æ...</div>
                </div>
            </div>
            
            <div class="panel">
                <div class="panel-header">
                    <div class="panel-title">ğŸ“… åˆ†ææ—¶é—´çº¿</div>
                </div>
                <div class="timeline">
                    <div class="timeline-item">
                        <div class="timeline-date">T+0</div>
                        <div class="timeline-title">åˆå§‹åŒ– KaiDison</div>
                        <div class="timeline-desc">åŠ è½½æ‰€æœ‰èƒ¶å›Šï¼Œå¯åŠ¨å››å¤§å¼•æ“</div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-date">T+1s</div>
                        <div class="timeline-title">è·¨åŸŸå…³è”åˆ†æ</div>
                        <div class="timeline-desc">è®¡ç®—é¢†åŸŸé—´ Jaccard ç›¸ä¼¼åº¦</div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-date">T+2s</div>
                        <div class="timeline-title">çªç ´æ£€æµ‹</div>
                        <div class="timeline-desc">åŒ¹é…çªç ´æ¨¡å¼è¯ï¼Œè®¡ç®—é‡è¦æ€§</div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-date">T+3s</div>
                        <div class="timeline-title">èåˆèƒ¶å›Šç”Ÿæˆ</div>
                        <div class="timeline-desc">äº§å‡ºè·¨åŸŸèåˆçŸ¥è¯†èƒ¶å›Š</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Footer -->
        <div class="footer">
            <p>ğŸ§¬ KaiDison ä¸“ä¸šçº§æ•°å­—ç§‘å­¦å®¶ | çŸ¥è¯†æ¢çº½ v0.1.0</p>
            <p style="margin-top: 10px; font-size: 0.85em;">
                æ‰“é€š SuiLight â†’ KaiDison â†’ CapsuleHub å®Œæ•´é“¾è·¯
            </p>
        </div>
    </div>
    
    <script>
        const API_BASE = '';
        
        async function loadStatus() {
            try {
                // Load KaiDison status
                const statusRes = await fetch(`${API_BASE}/api/kai-dison/status`);
                const status = await statusRes.json();
                
                document.getElementById('crossLinks').textContent = status.stats?.cross_domain_links || 0;
                document.getElementById('breakthroughs').textContent = status.stats?.breakthroughs || 0;
                document.getElementById('consensus').textContent = status.stats?.consensus || 0;
                document.getElementById('fusionCapsules').textContent = status.stats?.fusion_capsules || 0;
                
                // Update progress bars
                const updateBar = (id, current, target) => {
                    const pct = target > 0 ? Math.min(100, (current / target) * 100) : 0;
                    document.getElementById(id).style.width = `${pct}%`;
                };
                
                updateBar('crossLinksBar', status.stats?.cross_domain_links || 0, 20);
                updateBar('breakthroughsBar', status.stats?.breakthroughs || 0, 5);
                updateBar('consensusBar', status.stats?.consensus || 0, 5);
                updateBar('fusionCapsulesBar', status.stats?.fusion_capsules || 0, 10);
                
            } catch (e) {
                console.log('Status load error:', e);
            }
        }
        
        async function runAnalysis() {
            const btn = document.querySelector('.btn-primary');
            btn.textContent = 'ğŸ”„ åˆ†æä¸­...';
            btn.disabled = true;
            
            try {
                const res = await fetch(`${API_BASE}/api/kai-dison/analyze`);
                const data = await res.json();
                
                // Update stats
                document.getElementById('crossLinks').textContent = data.stats?.cross_domain_links || 0;
                document.getElementById('breakthroughs').textContent = data.stats?.breakthroughs || 0;
                document.getElementById('consensus').textContent = data.stats?.consensus || 0;
                document.getElementById('fusionCapsules').textContent = data.stats?.fusion_capsules || 0;
                
                // Render breakthroughs
                renderList('breakthroughsList', data.breakthroughs || [], item => `
                    <li>
                        <div class="item-title">${item.title}</div>
                        <div class="item-meta">
                            <span>é‡è¦æ€§: ${item.significance}%</span>
                            <span>ç±»å‹: ${item.type}</span>
                        </div>
                    </li>
                `);
                
                // Render associations
                renderList('associationsList', data.associations || [], item => `
                    <li>
                        <div class="item-title">${item.domains[0]} â†” ${item.domains[1]}</div>
                        <div class="item-meta">
                            <span>å¼ºåº¦: ${(item.strength * 100).toFixed(0)}%</span>
                        </div>
                    </li>
                `);
                
                // Render consensus
                renderList('consensusList', data.consensus || [], item => `
                    <li>
                        <div class="item-title">${item.topic}</div>
                        <div class="item-meta">
                            <span>å¼ºåº¦: ${(item.strength * 100).toFixed(0)}%</span>
                            <span>${item.domains.length}æ–¹è¾¾æˆ</span>
                        </div>
                    </li>
                `);
                
            } catch (e) {
                alert('åˆ†æå¤±è´¥: ' + e.message);
            }
            
            btn.textContent = 'ğŸ”„ è¿è¡Œåˆ†æ';
            btn.disabled = false;
        }
        
        function renderList(containerId, items, template) {
            const container = document.getElementById(containerId);
            if (!items || items.length === 0) {
                container.innerHTML = '<div class="loading">æš‚æ— æ•°æ®</div>';
                return;
            }
            container.innerHTML = `<ul class="item-list">${items.map(template).join('')}</ul>`;
        }
        
        // Initialize
        loadStatus();
    </script>
</body>
</html>
